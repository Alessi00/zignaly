import faker from "faker";
import merge from "../../src/utils/merge";

export const makePosition = (override?: Partial<Position>): Position => {
  const seed: PositionBase = {
    amount: 0.9,
    availableAmount: 0.9,
    base: "LINK",
    buyPrice: 27.74,
    buyTTL: 5184000,
    closed: false,
    exchange: "Zignaly",
    exchangeType: "spot",
    internalExchangeId: "Zignaly1585127408_5e8754f075020",
    invested: 24.966,
    isCopyTrader: false,
    isCopyTrading: false,
    leverage: 1,
    logoUrl: "",
    multiData: null,
    openDate: 1631045398000,
    pair: "LINKUSDT",
    paperTrading: false,
    positionId: faker.random.alphaNumeric(24),
    positionSizePercentage: null,
    positionSizeQuote: 24.965999999999998,
    priceDifference: -17.48,
    profitSharing: false,
    providerId: "1",
    providerName: "Manual",
    providerOwnerUserId: "5e6b15a86c20cdaa4c0196e0",
    quote: "USDT",
    realInvestment: 24.965999999999998,
    reBuyTargets: null,
    reduceOrders: null,
    remainAmount: 0.8991,
    sellPrice: 22.89,
    short: "LINK/USDT",
    side: "LONG",
    signalId: "a2bab8feb4427ab12ddb1f1bdb8dd9b7",
    status: 9,
    stopLossFollowsTakeProfit: false,
    stopLossOrderId: null,
    stopLossPercentage: null,
    stopLossPrice: null,
    stopLossPriority: "percentage",
    stopLossToBreakEven: false,
    takeProfitTargets: null,
    takeProfitTargetsCountFail: 0,
    takeProfitTargetsCountPending: 0,
    takeProfitTargetsCountSuccess: 0,
    tradeViewSymbol: "LINKUSDT",
    trailingStopPercentage: null,
    trailingStopTriggered: false,
    trailingStopTriggerPercentage: null,
    trailingStopTriggerPrice: false,
    trailingStopTriggerPriority: "percentage",
    type: "open",
    unitsAmount: "LINK",
    unitsInvestment: "USDT",
    updating: false,
  };
  return merge(seed, override) as Position;
};

// const p: Position = {
//   amount: 68.2,
//   availableAmount: 68.2,
//   base: "MATIC",
//   buyPrice: 1.37,
//   buyTTL: 86400,
//   closed: true,
//   closeDate: 1632182427000,
//   currentAllocatedBalance: 94.168991452035,
//   exchange: "Zignaly",
//   exchangeType: "spot",
//   fees: -0.17031839999999998,
//   fundingFees: 0,
//   internalExchangeId: "Zignaly1585927408_5e8754f075080",
//   invested: 93.093,
//   isCopyTrader: false,
//   isCopyTrading: true,
//   leverage: 1,
//   logoUrl: "https://res.cloudinary.com/zignaly/image/upload/v1616196772/mechby3bsajmgjshlys4.png",
//   multiData: null,
//   netProfit: "-16.037918400000",
//   netProfitPercentage: -17.16,
//   openDate: 1632009695000,
//   pair: "MATICUSDT",
//   paperTrading: false,
//   positionId: "61467dadf447657eea2135db",
//   positionSize: 93.43400000000001,
//   positionSizePercentage: 98.85738241915541,
//   positionSizeQuote: 93.093,
//   profit: "-15.867600000000",
//   profitPercentage: -16.98,
//   profitSharing: false,
//   providerId: "5f8bda27637099082e53a76b",
//   providerName: "Matic-usdt Pumps",
//   providerOwnerUserId: "5c6779886c20cd40f0558302",
//   quote: "USDT",
//   realInvestment: 93.093,
//   reBuyTargets: null,
//   reduceOrders: null,
//   remainAmount: 0.03180000000000405,
//   returnFromAllocated: -17.03,
//   returnFromInvestment: -17.16,
//   sellPrice: 1.13,
//   short: "MATIC/USDT",
//   side: "LONG",
//   signalId: "maticusdt",
//   status: 40,
//   stopLossFollowsTakeProfit: false,
//   stopLossOrderId: null,
//   stopLossPercentage: null,
//   stopLossPrice: null,
//   stopLossPriority: "percentage",
//   stopLossToBreakEven: false,
//   takeProfitTargets: null,
//   takeProfitTargetsCountFail: 0,
//   takeProfitTargetsCountPending: 0,
//   takeProfitTargetsCountSuccess: 0,
//   tradeViewSymbol: "MATICUSDT",
//   trailingStopPercentage: null,
//   trailingStopTriggered: false,
//   trailingStopTriggerPercentage: null,
//   trailingStopTriggerPrice: false,
//   trailingStopTriggerPriority: "percentage",
//   type: "closed",
//   unitsAmount: "MATIC",
//   unitsInvestment: "USDT",
//   updating: true,
// };

export const makeClosedPosition = (override?: Partial<Position>) => {
  return makePosition({
    ...override,
    closed: true,
    status: 40,
    type: "closed",
    updating: true,
    closeDate: 1632182427000,
    returnFromAllocated: -17.03,
    fees: -0.17031839999999998,
    fundingFees: 0,
    netProfit: "-16.037918400000",
    netProfitPercentage: -17.16,
    positionSize: 93.43400000000001,
    profit: -15.8676,
    profitPercentage: -16.98,
    returnFromInvestment: -17.16,
  });
};

export const makeOpenPosition = (override?: Partial<Position>) => {
  return makePosition({
    ...override,
    closed: false,
    status: 9,
    type: "open",
    unrealizedProfitLosses: -4.607999999999998,
    unrealizedProfitLossesPercentage: -18.46,
  });
};
